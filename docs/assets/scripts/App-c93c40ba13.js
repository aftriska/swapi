!function(e){function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var s={};n.m=e,n.c=s,n.i=function(e){return e},n.d=function(e,s,t){n.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(s,"a",s),s},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,s){"use strict";function t(e){if(Array.isArray(e)){for(var n=0,s=Array(e.length);n<e.length;n++)s[n]=e[n];return s}return Array.from(e)}var r=[{path:"/",name:""},{path:"/",name:"films"},{path:"/",name:"people"},{path:"/",name:"species"},{path:"/",name:"planets"},{path:"/",name:"starships"},{path:"/",name:"vehicles"}],a=r.slice(1),i=Array.from(document.querySelectorAll(".route")),l=Array.from(document.querySelectorAll(".page-section")),o=document.querySelector(".modal"),c=document.querySelector(".detail-opening"),p=document.querySelector(".detail-films"),u=document.querySelector(".detail-people"),f=document.querySelector(".detail-species"),h=document.querySelector(".detail-planets"),m=document.querySelector(".detail-starships"),g=document.querySelector(".detail-vehicles"),d=document.querySelector("[name=route]"),b=document.querySelector(".modal__close"),y=document.querySelector(".spinner"),v=JSON.parse(sessionStorage.getItem("nextPages"))||{},w=function(){y.classList.add("spinner--is-visible")},S=function(){y.classList.remove("spinner--is-visible")},_=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},L=function(e){var n=new Date(e.release_date).toDateString();return'\n    <p><h4 class="item-top-title">EPISODE '+e.episode_id+'</h4></p>\n    <p><h3 class="item-title">'+e.title+'</h3></p>\n    <p><span class="subtitle-yellow">Director:</span> '+e.director+' <span class="subtitle-yellow">Producer:</span> '+e.producer+' <span class="subtitle-yellow">Release Date:</span> '+n+"</p>\n  "},M=function(e,n,s){return'\n    <button data-type="detailBtn" data-url="'+e+'" data-source="'+n+'" class="item-extend-description">'+s+"</button>\n  "},T=function(e){var n=document.querySelector("div[data-page=films"),s=e.sort(function(e,n){return e.release_date>n.release_date?1:-1});n.innerHTML=s.map(function(e,n){var s=L(e),t=M(e.url,"films","More Details...");return'\n    <div class="row__large-6">\n      <div class="page-section__item">\n        '+s+'\n        <p><span class="item-description">'+e.opening_crawl.substr(0,199)+"...</p>\n        <p>"+t+"</p>\n      </div>\n    </div>\n    "}).join("")},H=function(e){return'\n    <p><h4 class="item-top-title">'+e.name+'</h4></p>\n    <p>\n      <span class="subtitle-yellow">Birth Year:</span> '+e.birth_year+'<br />\n      <span class="subtitle-yellow">Gender:</span> '+e.gender+'<br />\n      <span class="subtitle-yellow">Height:</span> '+e.height+' <span class="subtitle-yellow">Mass:</span> '+e.mass+'<br />\n      <span class="subtitle-yellow">Eye Color:</span> '+e.eye_color+' <span class="subtitle-yellow">Hair Color:</span> '+e.hair_color+'<br />\n      <span class="subtitle-yellow">Skin Color:</span> '+e.skin_color+"\n    </p>\n  "},O=function(e){document.querySelector("div[data-page=people").innerHTML=e.map(function(e,n){return'\n    <div class="row__large-4">\n      <div class="page-section__item">\n        <p><em>'+(n+1)+"</em></p>\n        "+H(e)+"\n        <p>"+M(e.url,"people","More Details...")+"</p>\n      </div>\n    </div>\n    "}).join("")},E=function(e){return'\n  <p><h4 class="item-top-title">'+e.name+'</h4></p>\n  <p>\n    <span class="subtitle-yellow">Language:</span> '+e.language+'<br />\n    <span class="subtitle-yellow">Classification:</span> '+e.classification+'<br />\n    <span class="subtitle-yellow">Designation:</span> '+e.designation+'<br />\n    <span class="subtitle-yellow">Avg Height:</span> '+e.average_height+'<br />\n    <span class="subtitle-yellow">Avg Lifespan:</span> '+e.average_lifespan+'<br />\n    <span class="subtitle-yellow">Eye Colors:</span> '+e.eye_colors+'<br />\n    <span class="subtitle-yellow">Hair Colors:</span> '+e.hair_colors+'<br />\n    <span class="subtitle-yellow">Skin Colors:</span> '+e.skin_colors+"\n  </p>\n  "},C=function(e){document.querySelector("div[data-page=species").innerHTML=e.map(function(e,n){return'\n    <div class="row__large-4">\n      <div class="page-section__item">\n        <p><em>'+(n+1)+"</em></p>\n        "+E(e)+"\n        <p>"+M(e.url,"species","More Details...")+"</p>\n      </div>\n    </div>\n    "}).join("")},q=function(e){return'\n  <p><h4 class="item-top-title">'+e.name+'</h4></p>\n  <p>\n    <span class="subtitle-yellow">Diameter:</span> '+e.diameter+'<br />\n    <span class="subtitle-yellow">Orbital Period:</span> '+e.orbital_period+'<br />\n    <span class="subtitle-yellow">Rotation Period:</span> '+e.rotation_period+'<br />\n    <span class="subtitle-yellow">Surface Water:</span> '+e.surface_water+'<br />\n    <span class="subtitle-yellow">Terrain:</span> '+e.terrain+'<br />\n    <span class="subtitle-yellow">Climate:</span> '+e.climate+'<br />\n    <span class="subtitle-yellow">Gravity:</span> '+e.gravity+'<br />\n    <span class="subtitle-yellow">Population:</span> '+_(e.population)+"<br />\n  </p>\n  "},I=function(e){document.querySelector("div[data-page=planets").innerHTML=e.map(function(e,n){return'\n    <div class="row__large-4">\n      <div class="page-section__item">\n        <p><em>'+(n+1)+"</em></p>\n        "+q(e)+"\n        <p>"+M(e.url,"planets","More Details...")+"</p>\n      </div>\n    </div>\n    "}).join("")},k=function(e){return'\n  <p><h4 class="item-top-title">'+e.name+'</h4></p>\n  <p>\n    <span class="subtitle-yellow">Model:</span> '+e.model+'<br />\n    <span class="subtitle-yellow">Starship Class:</span> '+e.starship_class+'<br />\n    <span class="subtitle-yellow">Length:</span> '+_(e.length)+'<br />\n    <span class="subtitle-yellow">MGLT:</span> '+e.mglt+'<br />\n    <span class="subtitle-yellow">Hyperdrive Rating:</span> '+e.hyperdrive_rating+'<br />\n    <span class="subtitle-yellow">Max. Atmosphering Speed:</span> '+e.max_atmosphering_speed+'<br />\n    <span class="subtitle-yellow">Manufacturer:</span> '+e.manufacturer+'<br />\n    <span class="subtitle-yellow">Crew:</span> '+_(e.crew)+'<br />\n    <span class="subtitle-yellow">Passengers:</span> '+_(e.passengers)+'<br />\n    <span class="subtitle-yellow">Cargo Capacity:</span> '+_(e.cargo_capacity)+'<br />\n    <span class="subtitle-yellow">Consumables:</span> '+e.consumables+'<br />\n    <span class="subtitle-yellow">Cost (in credits):</span> '+_(e.cost_in_credits)+"\n  </p>\n  "},J=function(e){document.querySelector("div[data-page=starships").innerHTML=e.map(function(e,n){return'\n    <div class="row__large-4">\n      <div class="page-section__item">\n        <p><em>'+(n+1)+"</em></p>\n        "+k(e)+"\n        <p>"+M(e.url,"starships","More Details...")+"</p>\n      </div>\n    </div>\n    "}).join("")},N=function(e){return'\n  <p><h4 class="item-top-title">'+e.name+'</h4></p>\n  <p>\n    <span class="subtitle-yellow">Model:</span> '+e.model+'<br />\n    <span class="subtitle-yellow">Vehicle Class:</span> '+e.vehicle_class+'<br />\n    <span class="subtitle-yellow">Length:</span> '+_(e.length)+'<br />\n    <span class="subtitle-yellow">Max. Atmosphering Speed:</span> '+e.max_atmosphering_speed+'<br />\n    <span class="subtitle-yellow">Manufacturer:</span> '+e.manufacturer+'<br />\n    <span class="subtitle-yellow">Crew:</span> '+_(e.crew)+'<br />\n    <span class="subtitle-yellow">Passengers:</span> '+_(e.passengers)+'<br />\n    <span class="subtitle-yellow">Cargo Capacity:</span> '+_(e.cargo_capacity)+'<br />\n    <span class="subtitle-yellow">Consumables:</span> '+e.consumables+'<br />\n    <span class="subtitle-yellow">Cost (in credits):</span> '+_(e.cost_in_credits)+"\n  </p>\n  "},j=function(e){document.querySelector("div[data-page=vehicles").innerHTML=e.map(function(e,n){return'\n    <div class="row__large-4">\n      <div class="page-section__item">\n        <p><em>'+(n+1)+"</em></p>\n        "+N(e)+"\n        <p>"+M(e.url,"vehicles","More Details...")+"</p>\n      </div>\n    </div>\n    "}).join("")},x=function(e){var n=JSON.parse(sessionStorage.getItem(""+e));switch(e){case"films":T(n);break;case"people":O(n);break;case"species":C(n);break;case"planets":I(n);break;case"starships":J(n);break;case"vehicles":j(n)}},P=function(){d.classList.remove("larger"),i.forEach(function(e){return e.classList.remove("larger")})},A=function(e){e.classList.add("larger")},D=function(){i.forEach(function(e){return e.style.display="none"})},B=function(){i.forEach(function(e){return e.style.display="block"})},G=function(){l.forEach(function(e){return e.classList.remove("page-section--is-visible")})},R=function(e){l.find(function(n){return n.id===e}).classList.add("page-section--is-visible")},V=function(){K(),X();var e=location.pathname,n=location.hash,s=n.substr(1),t=r.filter(function(n){return"/swapi"+n.path===e&&n.name===s})[0],a=document.querySelector("a[href='"+n+"']");t?""===t.name?(P(),A(d),G(),R("homePage")):(P(),B(),A(a),G(),R(t.name)):(D(),G(),R("error404"))},F=function e(n){var s=v[""+n],t=JSON.parse(sessionStorage.getItem(""+n));null!==s?(w(),fetch(s).then(function(e){return e.json()}).then(function(s){v[""+n]=s.next,sessionStorage.setItem("nextPages",JSON.stringify(v));var r=s.results.length,a=0;s.results.forEach(function(s){t.filter(function(e){return s.url===e.url})[0]?++a===r&&e(n):(t.push(s),sessionStorage.setItem(""+n,JSON.stringify(t)),x(n),X(),S())})}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message),S()})):S()},W=function(e){e.target.scrollTop+e.target.offsetHeight>=e.target.scrollHeight&&F(e.target.id)},Y=function(e,n){var s=null,t=0,r=0,a=0,i=0,l=0,o=0,d=null;c.innerHTML="",p.innerHTML="",u.innerHTML="",f.innerHTML="",h.innerHTML="",m.innerHTML="",g.innerHTML="";var b=JSON.parse(sessionStorage.getItem("films")),y=JSON.parse(sessionStorage.getItem("people")),v=JSON.parse(sessionStorage.getItem("species")),_=JSON.parse(sessionStorage.getItem("planets")),T=JSON.parse(sessionStorage.getItem("starships")),O=JSON.parse(sessionStorage.getItem("vehicles"));switch(n){case"films":t=(s=b.filter(function(n){return e===n.url})[0]).characters.length,r=s.species.length,a=s.planets.length,l=s.starships.length,o=s.vehicles.length,d=s.characters;var C=L(s);c.innerHTML="\n        "+C+'\n        <p><span class="item-description">'+s.opening_crawl+"</p>\n      ";break;case"people":i=(s=y.filter(function(n){return e===n.url})[0]).films.length,r=s.species.length,l=s.starships.length,o=s.vehicles.length,c.innerHTML=H(s);break;case"species":i=(s=v.filter(function(n){return e===n.url})[0]).films.length,t=s.people.length,d=s.people,c.innerHTML=E(s);break;case"planets":i=(s=_.filter(function(n){return e===n.url})[0]).films.length,t=s.residents.length,d=s.residents,c.innerHTML=q(s);break;case"starships":i=(s=T.filter(function(n){return e===n.url})[0]).films.length,t=s.pilots.length,d=s.pilots,c.innerHTML=k(s);break;case"vehicles":i=(s=O.filter(function(n){return e===n.url})[0]).films.length,t=s.pilots.length,d=s.pilots,c.innerHTML=N(s)}0!==i&&(p.innerHTML="\n      <p><strong>Films:</strong></p>\n    ",s.films.forEach(function(e,n){var s=b.find(function(n){return n.url===e});s?(p.innerHTML+=M(s.url,"films",s.title),X()):(w(),fetch(e).then(function(e){return e.json()}).then(function(e){b.push(e),sessionStorage.setItem("films",JSON.stringify(b)),p.innerHTML+=M(e.url,"films",e.title),x("films"),X(),S()}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message),S()}))})),0!==t&&(u.innerHTML="\n      <p><strong>Characters:</strong></p>\n    ",d.forEach(function(e,n){var s=y.find(function(n){return n.url===e});s?(u.innerHTML+=M(s.url,"people",s.name),X()):(w(),fetch(e).then(function(e){return e.json()}).then(function(e){y.push(e),sessionStorage.setItem("people",JSON.stringify(y)),u.innerHTML+=M(e.url,"people",e.name),x("people"),X(),S()}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message),S()}))})),0!==r&&(f.innerHTML="\n      <p><strong>Species:</strong></p>\n    ",s.species.forEach(function(e,n){var s=v.find(function(n){return n.url===e});s?(f.innerHTML+=M(s.url,"species",s.name),X()):(w(),fetch(e).then(function(e){return e.json()}).then(function(e){v.push(e),sessionStorage.setItem("species",JSON.stringify(v)),f.innerHTML+=M(e.url,"species",e.name),x("species"),X(),S()}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message),S()}))})),0!==a&&(h.innerHTML="\n      <p><strong>Planets:</strong></p>\n    ",s.planets.forEach(function(e,n){var s=_.find(function(n){return n.url===e});s?(h.innerHTML+=M(s.url,"planets",s.name),X()):(w(),fetch(e).then(function(e){return e.json()}).then(function(e){_.push(e),sessionStorage.setItem("planets",JSON.stringify(_)),h.innerHTML+=M(e.url,"planets",e.name),x("planets"),X(),S()}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message),S()}))})),0!==l&&(m.innerHTML="\n      <p><strong>Starships:</strong></p>\n    ",s.starships.forEach(function(e,n){var s=T.find(function(n){return n.url===e});s?(m.innerHTML+=M(s.url,"starships",s.name),X()):(w(),fetch(e).then(function(e){return e.json()}).then(function(e){T.push(e),sessionStorage.setItem("starships",JSON.stringify(T)),m.innerHTML+=M(e.url,"starships",e.name),x("starships"),X(),S()}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message),S()}))})),0!==o&&(g.innerHTML="\n      <p><strong>Vehicles:</strong></p>\n    ",s.vehicles.forEach(function(e,n){var s=O.find(function(n){return n.url===e});s?(g.innerHTML+=M(s.url,"vehicles",s.name),X()):(w(),fetch(e).then(function(e){return e.json()}).then(function(e){O.push(e),sessionStorage.setItem("vehicles",JSON.stringify(O)),g.innerHTML+=M(e.url,"vehicles",e.name),x("vehicles"),X(),S()}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message),S()}))}))},z=function(){o.classList.add("modal--is-visible")},K=function(){o.classList.remove("modal--is-visible")},Q=function(e){27==e.keyCode&&K()},U=function(e){Y(e.target.dataset.url,e.target.dataset.source),z()},X=function(){Array.from(document.querySelectorAll("[data-type=detailBtn]")).forEach(function(e){e.addEventListener("click",U)})};!function(){K(),a.forEach(function(e){var n="http://swapi.co/api/"+e.name+"/",s=JSON.parse(sessionStorage.getItem(""+e.name))||[];0===s.length?(w(),fetch(n).then(function(e){return e.json()}).then(function(n){v[""+e.name]=n.next,s.push.apply(s,t(n.results)),sessionStorage.setItem("nextPages",JSON.stringify(v)),sessionStorage.setItem(""+e.name,JSON.stringify(s)),x(e.name),X(),S()}).catch(function(e){console.log("There has been a problem with your fetch operation: "+e.message)})):x(e.name)})}(),window.addEventListener("load",V),window.onpopstate=V,window.addEventListener("keydown",Q),l.forEach(function(e){e.addEventListener("scroll",W)}),d.addEventListener("click",function(){window.history.pushState({},"name","/swapi/"),B(),P(),A(d),G(),R("homePage"),K()}),b.addEventListener("click",K)}]);